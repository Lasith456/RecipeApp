(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},2907:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>i});var a=r(5155),s=r(2115),o=r(5490);let n=(0,s.createContext)(),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let{data:e}=await o.A.get("/auth/check-auth");e.success&&i(e.user)}catch(e){i(null)}finally{c(!1)}})()},[]);let u=async e=>{try{let{data:t}=await o.A.post("/auth/signup",e);return t}catch(e){var t,r;throw Error((null==(r=e.response)||null==(t=r.data)?void 0:t.message)||"Signup failed")}},d=async e=>{try{let{data:t}=await o.A.post("/auth/login",e);return t.success&&i(t.user),t}catch(e){throw e}},h=async()=>{try{await o.A.post("/auth/logout"),i(null)}catch(e){console.error("Logout failed:",e)}},y=async e=>{try{return await o.A.post("/auth/verify-email",e)}catch(e){var t,r;throw Error((null==(r=e.response)||null==(t=r.data)?void 0:t.message)||"Verification failed")}},f=async e=>{try{return await o.A.post("/auth/forget-password",e)}catch(e){var t,r;throw Error((null==(r=e.response)||null==(t=r.data)?void 0:t.message)||"Request failed")}},p=async e=>{let{token:t,password:r}=e;try{return await o.A.post("/auth/reset-password/".concat(t),{password:r})}catch(e){var a,s;throw Error((null==(s=e.response)||null==(a=s.data)?void 0:a.message)||"Password reset failed")}},m=async e=>{try{let{data:t}=await o.A.post("/user/favorites",e);t.success&&i(e=>({...e,favorites:t.favorites}))}catch(e){console.error("Failed to add favorite:",e)}},g=async e=>{try{let{data:t}=await o.A.delete("/user/favorites/".concat(e));t.success&&i(e=>({...e,favorites:t.favorites}))}catch(e){console.error("Failed to remove favorite:",e)}};return(0,a.jsx)(n.Provider,{value:{user:r,setUser:i,loading:l,signup:u,login:d,logout:h,verifyEmail:y,forgotPassword:f,resetPassword:p,addFavorite:m,removeFavorite:g},children:t})},l=()=>(0,s.useContext)(n)},5490:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=r(5125).A.create({baseURL:"https://recipeapp-nnyq.onrender.com/api",withCredentials:!0})},6921:(e,t,r)=>{Promise.resolve().then(r.bind(r,7960))},7960:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(5155),s=r(2115),o=r(2907),n=r(63),i=r(1733);function l(){let{verifyEmail:e}=(0,o.A)(),t=(0,n.useRouter)(),[r,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[d,h]=(0,s.useState)(""),[y,f]=(0,s.useState)(!1),p=async a=>{a.preventDefault(),u(""),h(""),f(!0);try{await e({code:r}),h("Email verified successfully! Redirecting..."),setTimeout(()=>t.push("/login"),2e3)}catch(e){u(e.message||"Invalid or expired code.")}finally{f(!1)}};return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-80px)] bg-gray-50",children:(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Verify Your Email"}),(0,a.jsx)("p",{className:"text-gray-600",children:"A verification code has been sent to your email address. Please enter it below."}),(0,a.jsxs)("form",{className:"space-y-6",onSubmit:p,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-600 block sr-only",children:"Verification Code"}),(0,a.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),className:"w-full p-3 mt-1 text-gray-900 bg-gray-50 rounded-md border border-gray-200 focus:outline-none focus:ring-2 focus:ring-pink-500 text-center tracking-widest text-lg",placeholder:"_ _ _ _ _ _",maxLength:"6",required:!0})]}),c&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:c}),d&&(0,a.jsx)("p",{className:"text-green-500 text-sm",children:d}),(0,a.jsx)("button",{type:"submit",className:"w-full py-3 font-bold text-white bg-pink-500 rounded-md hover:bg-pink-600 transition-colors disabled:bg-pink-300 disabled:cursor-not-allowed",disabled:y,children:y?"Verifying...":"Verify"})]})]})})}}},e=>{e.O(0,[125,733,441,255,358],()=>e(e.s=6921)),_N_E=e.O()}]);