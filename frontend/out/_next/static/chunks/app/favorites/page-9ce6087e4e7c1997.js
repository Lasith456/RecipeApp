(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{578:(e,t,s)=>{Promise.resolve().then(s.bind(s,6823))},2907:(e,t,s)=>{"use strict";s.d(t,{A:()=>n,AuthProvider:()=>c});var r=s(5155),a=s(2115),l=s(5490);let i=(0,a.createContext)(),c=e=>{let{children:t}=e,[s,c]=(0,a.useState)(null),[n,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let{data:e}=await l.A.get("/auth/check-auth");e.success&&c(e.user)}catch(e){c(null)}finally{o(!1)}})()},[]);let d=async e=>{try{let{data:t}=await l.A.post("/auth/signup",e);return t}catch(e){var t,s;throw Error((null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Signup failed")}},u=async e=>{try{let{data:t}=await l.A.post("/auth/login",e);return t.success&&c(t.user),t}catch(e){throw e}},h=async()=>{try{await l.A.post("/auth/logout"),c(null)}catch(e){console.error("Logout failed:",e)}},x=async e=>{try{return await l.A.post("/auth/verify-email",e)}catch(e){var t,s;throw Error((null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Verification failed")}},p=async e=>{try{return await l.A.post("/auth/forget-password",e)}catch(e){var t,s;throw Error((null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Request failed")}},m=async e=>{let{token:t,password:s}=e;try{return await l.A.post("/auth/reset-password/".concat(t),{password:s})}catch(e){var r,a;throw Error((null==(a=e.response)||null==(r=a.data)?void 0:r.message)||"Password reset failed")}},v=async e=>{try{let{data:t}=await l.A.post("/user/favorites",e);t.success&&c(e=>({...e,favorites:t.favorites}))}catch(e){console.error("Failed to add favorite:",e)}},f=async e=>{try{let{data:t}=await l.A.delete("/user/favorites/".concat(e));t.success&&c(e=>({...e,favorites:t.favorites}))}catch(e){console.error("Failed to remove favorite:",e)}};return(0,r.jsx)(i.Provider,{value:{user:s,setUser:c,loading:n,signup:d,login:u,logout:h,verifyEmail:x,forgotPassword:p,resetPassword:m,addFavorite:v,removeFavorite:f},children:t})},n=()=>(0,a.useContext)(i)},3646:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var r=s(5155),a=s(2115),l=s(1733),i=s(2907),c=s(63),n=s(5490),o=s(5239);let d=e=>{let{className:t="w-6 h-6"}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:(0,r.jsx)("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-1.383-.597 15.218 15.218 0 0 1-2.203-1.33c-.326-.22-.652-.451-.973-.682A5.005 5.005 0 0 1 6 15a5.005 5.005 0 0 1-2.5-4.243V9.752a5.25 5.25 0 0 1 3.25-4.941c1.453-.498 3.043.226 4.25 1.364a5.25 5.25 0 0 1 4.25-1.364c1.453.498 3.043 1.226 3.25 4.941V10.757a5.005 5.005 0 0 1-2.5 4.243c-.321.231-.647.462-.973.682a15.218 15.218 0 0 1-2.203 1.33 15.247 15.247 0 0 1-1.383.597l-.022.012-.007.003Z"})})},u=e=>{let{className:t="w-6 h-6"}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})};function h(e){var t;let{recipeId:s,onClose:h}=e,[x,p]=(0,a.useState)(null),[m,v]=(0,a.useState)(!0),{user:f,addFavorite:g,removeFavorite:y}=(0,i.A)(),w=(0,c.useRouter)();(0,a.useEffect)(()=>{(async()=>{v(!0);try{let{data:e}=await n.A.get("/recipes/details/".concat(s));e.success&&p(e.recipe)}catch(e){console.error("Failed to fetch recipe details:",e)}finally{v(!1)}})()},[s]);let j=null==f||null==(t=f.favorites)?void 0:t.some(e=>e.idMeal===s),b=async()=>{if(!f)return void w.push("/login");if(j)await y(s);else{let e={idMeal:x.idMeal,strMeal:x.strMeal,strMealThumb:x.strMealThumb};await g(e)}},N=x?Object.keys(x).filter(e=>e.startsWith("strIngredient")&&x[e]).map(e=>"".concat(x[e]," - ").concat(x["strMeasure".concat(e.slice(13))])):[];return(0,r.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:h,children:(0,r.jsx)(l.P.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},transition:{type:"spring",damping:20,stiffness:200},className:"bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:m?(0,r.jsx)("div",{className:"h-96 flex justify-center items-center",children:(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-pink-500 border-dashed rounded-full animate-spin"})}):x&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.default,{src:x.strMealThumb,alt:x.strMeal,width:800,height:800,className:"w-full h-64 object-cover rounded-t-2xl",unoptimized:!0}),(0,r.jsx)("button",{onClick:h,className:"absolute top-4 right-4 bg-white/70 rounded-full p-2 text-gray-800 hover:bg-white transition-colors",children:(0,r.jsx)(u,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{className:"p-6 md:p-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:x.strMeal}),(0,r.jsx)(l.P.button,{whileTap:{scale:1.2},onClick:b,className:"p-2 rounded-full transition-colors ".concat(j?"text-pink-500 bg-pink-100":"text-gray-400 bg-gray-100 hover:text-pink-500"),children:(0,r.jsx)(d,{className:"w-7 h-7"})})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[x.strCategory," | ",x.strArea]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Ingredients"}),(0,r.jsx)("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 list-disc list-inside text-gray-700",children:N.map((e,t)=>(0,r.jsx)("li",{children:e},t))})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Instructions"}),(0,r.jsx)("p",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:x.strInstructions})]})]})]})})})}},5490:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=s(5125).A.create({baseURL:"http://localhost:3001/api",withCredentials:!0})},5851:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(5155),a=s(1733),l=s(5239);function i(e){let{recipe:t,onClick:s}=e;return(0,r.jsxs)(a.P.div,{layout:!0,initial:{opacity:0,y:50,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.8},transition:{type:"spring",stiffness:200,damping:25},onClick:s,className:"bg-white rounded-xl overflow-hidden shadow-lg cursor-pointer group",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(l.default,{src:t.strMealThumb,alt:t.strMeal,width:500,height:500,className:"w-full h-48 object-cover transition-transform duration-300 group-hover-scale-110",unoptimized:!0})}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("h3",{className:"font-bold text-lg truncate text-gray-800",children:t.strMeal})})]})}},6823:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(5155),a=s(2115),l=s(63),i=s(2907),c=s(5851),n=s(3646),o=s(1733),d=s(1408);function u(){let{user:e,loading:t}=(0,i.A)(),s=(0,l.useRouter)(),[u,h]=(0,a.useState)(null);return((0,a.useEffect)(()=>{t||e||s.push("/login")},[e,t,s]),t)?(0,r.jsx)("div",{className:"flex justify-center items-center h-[calc(100vh-80px)]",children:(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-pink-500 border-dashed rounded-full animate-spin"})}):e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"container mx-auto p-4 md:p-8 min-h-[calc(100vh-80px)]",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-center my-8 text-gray-900",children:"My Favorite Recipes"}),e.favorites&&e.favorites.length>0?(0,r.jsx)(o.P.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:e.favorites.map(e=>(0,r.jsx)(c.A,{recipe:e,onClick:()=>h(e.idMeal)},e.idMeal))}):(0,r.jsx)("p",{className:"text-center text-gray-600 mt-10",children:"You haven't saved any favorite recipes yet."})]}),(0,r.jsx)(d.N,{children:u&&(0,r.jsx)(n.A,{recipeId:u,onClose:()=>h(null)},u)})]}):null}}},e=>{e.O(0,[125,733,841,441,255,358],()=>e(e.s=578)),_N_E=e.O()}]);