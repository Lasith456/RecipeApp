(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{212:(e,t,r)=>{Promise.resolve().then(r.bind(r,9163))},2907:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>n});var a=r(5155),s=r(2115),l=r(5490);let o=(0,s.createContext)(),n=e=>{let{children:t}=e,[r,n]=(0,s.useState)(null),[c,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let{data:e}=await l.A.get("/auth/check-auth");e.success&&n(e.user)}catch(e){n(null)}finally{i(!1)}})()},[]);let u=async e=>{try{let{data:t}=await l.A.post("/auth/signup",e);return t}catch(e){var t,r;throw Error((null==(r=e.response)||null==(t=r.data)?void 0:t.message)||"Signup failed")}},d=async e=>{try{let{data:t}=await l.A.post("/auth/login",e);return t.success&&n(t.user),t}catch(e){throw e}},h=async()=>{try{await l.A.post("/auth/logout"),n(null)}catch(e){console.error("Logout failed:",e)}},p=async e=>{try{return await l.A.post("/auth/verify-email",e)}catch(e){var t,r;throw Error((null==(r=e.response)||null==(t=r.data)?void 0:t.message)||"Verification failed")}},g=async e=>{try{return await l.A.post("/auth/forget-password",e)}catch(e){var t,r;throw Error((null==(r=e.response)||null==(t=r.data)?void 0:t.message)||"Request failed")}},y=async e=>{let{token:t,password:r}=e;try{return await l.A.post("/auth/reset-password/".concat(t),{password:r})}catch(e){var a,s;throw Error((null==(s=e.response)||null==(a=s.data)?void 0:a.message)||"Password reset failed")}},f=async e=>{try{let{data:t}=await l.A.post("/user/favorites",e);t.success&&n(e=>({...e,favorites:t.favorites}))}catch(e){console.error("Failed to add favorite:",e)}},m=async e=>{try{let{data:t}=await l.A.delete("/user/favorites/".concat(e));t.success&&n(e=>({...e,favorites:t.favorites}))}catch(e){console.error("Failed to remove favorite:",e)}};return(0,a.jsx)(o.Provider,{value:{user:r,setUser:n,loading:c,signup:u,login:d,logout:h,verifyEmail:p,forgotPassword:g,resetPassword:y,addFavorite:f,removeFavorite:m},children:t})},c=()=>(0,s.useContext)(o)},5490:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=r(5125).A.create({baseURL:"http://localhost:3001/api",withCredentials:!0})},9163:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5155),s=r(2115),l=r(2907),o=r(63),n=r(1733),c=r(2619),i=r.n(c);function u(){let{signup:e}=(0,l.A)(),t=(0,o.useRouter)(),[r,c]=(0,s.useState)(""),[u,d]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[g,y]=(0,s.useState)(""),[f,m]=(0,s.useState)(!1),x=async a=>{a.preventDefault(),y(""),m(!0);try{await e({name:r,email:u,password:h}),t.push("/verify-email")}catch(e){y(e.message||"Failed to create an account.")}finally{m(!1)}};return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-80px)] bg-gray-50",children:(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900",children:"Create an Account"}),(0,a.jsxs)("form",{className:"space-y-6",onSubmit:x,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-600 block",children:"Name"}),(0,a.jsx)("input",{type:"text",value:r,onChange:e=>c(e.target.value),className:"w-full p-3 mt-1 text-gray-900 bg-gray-50 rounded-md border border-gray-200 focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"user",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-600 block",children:"Email"}),(0,a.jsx)("input",{type:"email",value:u,onChange:e=>d(e.target.value),className:"w-full p-3 mt-1 text-gray-900 bg-gray-50 rounded-md border border-gray-200 focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"user@example.com",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-600 block",children:"Password"}),(0,a.jsx)("input",{type:"password",value:h,onChange:e=>p(e.target.value),className:"w-full p-3 mt-1 text-gray-900 bg-gray-50 rounded-md border border-gray-200 focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"••••••••",required:!0})]}),g&&(0,a.jsx)("p",{className:"text-red-500 text-sm text-center",children:g}),(0,a.jsx)("button",{type:"submit",className:"w-full py-3 font-bold text-white bg-pink-500 rounded-md hover:bg-pink-600 transition-colors disabled:bg-pink-300 disabled:cursor-not-allowed",disabled:f,children:f?"Signing Up...":"Sign Up"}),(0,a.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["Already have an account? ",(0,a.jsx)(i(),{href:"/login",className:"text-pink-500 hover:underline font-semibold",children:"Log in"})]})]})]})})}}},e=>{e.O(0,[125,733,176,441,255,358],()=>e(e.s=212)),_N_E=e.O()}]);